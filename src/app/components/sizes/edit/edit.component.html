<section id="add-main-page">
  <div class="card">
    <div class="row">
      <div class="col-md-12">
        <div class="card-body">
          <form [formGroup]="form" (ngSubmit)="submit()">
            <div class="form-group">
              <label for="">الاسم</label>
              <input type="text" class="form-control" formControlName="name" />
              <span
                class="text-danger"
                *ngIf="submitted && f.name?.errors?.required"
                >يجب ادخال الاسم</span
              >
            </div>
            <div class="form-group">
              <label for="">الايميل</label>
              <input type="text" class="form-control" formControlName="email" />
              <span
                class="text-danger"
                *ngIf="submitted && f.email?.errors?.required"
                >يجب ادخال الايميل</span
              >
            </div>

            <div>
              <div class="row">
                <div class="col-md-6">
                  <label for="">الاقسام المتاحة</label>
                </div>
                <div class="col-md-6" style="text-align: end">
                  <i
                    style="cursor: pointer"
                    class="fas fa-edit text-primary"
                    (click)="this.show = !this.show"
                  ></i>
                </div>
              </div>
              <div *ngIf="show == false">
                <span
                  class="badge badge-success"
                  *ngFor="let item of data?.permissions"
                >
                  {{ item.name }}
                </span>
              </div>
              <div class="form-group" *ngIf="show == true">
                <div class="col">
                  <div class="form-group">
                    <label for="">الصلاحيات </label>
                    <ng-select formControlName="permissions" [multiple]="true">
                      <ng-template ng-header-tmp>
                        <div class="d-flex w-100 justify-content-around">
                          <button
                            class="btn btn-primary"
                            (click)="onSelectAll()"
                          >
                            اختيار الكل
                          </button>
                          <button
                            class="btn btn-primary"
                            (click)="onClearAll()"
                          >
                            حذف الكل
                          </button>
                        </div>
                      </ng-template>
                      <ng-option
                        *ngFor="let role of AllPermitions || []"
                        [value]="role?.section_id"
                      >
                        {{ role?.section_name }}
                      </ng-option>
                    </ng-select>
                  </div>
                </div>
              </div>
            </div>
            <div class="form-group w-100 m-auto">
              <div class="item-wrapper one">
                <div class="item">
                  <div class="item-inner">
                    <div class="item-content">
                      <div class="image-upload">
                        <label style="cursor: pointer" for="file_upload">
                          <img
                            [src]="uploadedImage"
                            alt=""
                            class="uploaded-image"
                            style="
                              object-fit: contain;
                              width: 100px;
                              height: 100px;
                            "
                          />

                          <div class="h-100">
                            <div class="dplay-tbl">
                              <div class="dplay-tbl-cell">
                                <i class="fa fa-cloud-upload"></i>
                                <h5><b>عدل صورة الادمن</b></h5>
                              </div>
                            </div>
                          </div>
                          <input
                            data-required="image"
                            type="file"
                            id="file_upload"
                            class="image-input"
                            data-traget-resolution="image_resolution"
                            (change)="UploadImage($event)"
                          />
                        </label>
                      </div>
                      <span
                        class="text-danger"
                        *ngIf="form.controls.image.errors?.required"
                        >يجب ادخال صورة الادمن</span
                      >
                    </div>
                    <!--item-content-->
                  </div>
                </div>
                <!--item-->
              </div>
            </div>
            <div class="form-group text-center mt-5">
              <button class="btn btn-primary" type="submit">
                تعديل الادمن
              </button>
            </div>
          </form>
        </div>
      </div>
    </div>
  </div>
</section>
